$def with(settings)
<!-- Edit: Replace "proto_vals" with settings values for your plugin if used-->

$var title: $_(u'SIP chirpDataDisplay Plugin') <!--Edit: Title to show on browser tab-->
$var page: proto_plugin  <!--Edit: page name, used internally-->

<link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/v/dt/dt-1.10.22/datatables.min.css"/>
<script type="text/javascript" src="https://cdn.datatables.net/v/dt/dt-1.10.22/datatables.min.js"></script>

<script>

    // Initialize behaviors
    jQuery(document).ready(function(){

  

        jQuery("button#docButton").click(function(){
            window.open(baseUrl + "/static/docs/plugins/chirpDataDisplay-docs.html", "_blank"); //Edit: replace "proto-docs.html"
        });

    });
</script>




<div id="plugin">
    <h1> Chirp Soil Moisture Sensor Data Display</h1>
    <div class="title">chirpDataDisplay Plugin  <!--Edit: User page heading, Make relevant to your plugin-->
    <button class="execute" id="docButton" type="button" >$_(u'Help')</button>
    </div>

    
    
    <div class='option' title='select zone'><span class="label">$_(u'List of Zones'):</span>
        <select id="zoneList" name="zoneList" onchange="update()">
            <option value="zone_1">zone_1</option>
            <option value="zone_2">zone_2</option>
            <option value="zone_3" >zone_3</option>
            <option value="zone_4" >zone_4</option>
        </select>
    </div>

    
    
    
    
        <table id="chirpDataTable"class="table">
            <thead>
        <tr>
            <th scope=u"col">
             #
            </th>
            <th scope=u"col">
              Time
            </th>
            <th scope=u"col">
             Moisture
            </th>
            <th scope=u"col">
             Temperature
            </th>
        </tr>
            </thead>
        <tbody id="tbody">
          $for c in settings:
            <tr class="$loop.parity">
                <td>$loop.index</td>
                <td>$c[u'time']</td>
                <td>$c[u'moisture']</td>
                <td>$c[u'temperature']</td>
            </tr>
        </tbody>
        </table>
    
    
    
    
<script>
    function update(){
        var zoneSelected = document.getElementById("zoneList").value;
        jQuery.ajax(
            {
                url: '/updateTables',
                type: "POST",
                data: zoneSelected,
                success: function(result){
                    console.log("made it to sucess");
                    console.log(result.length);
                    console.log(result);
                    jQuery("#chirpDataTable").empty();
                    thHTML = '<thead><tr><th scope=u"col">#</th><th scope=u"col">Time</th><th scope=u"col">Moisture</th><th scope=u"col">Temperature</th></tr></thead>';
                    jQuery("#chirpDataTable").append(thHTML);
                    },
                error: function(result){
                     console.log("ERROR");
                     console.log(result)
                    }
                
            });
        
        }
</script>
 


<script>
    jQuery(document).ready(function() {
        jQuery("#chirpDataTable").DataTable({
            bLengthChange: true,
            lengthMenu: [[5,10,-1],[5,10,"All"]],
            bFilter: true,
            bSort: true,
            bPaginate: true,
            columns: [{'data':'#'},
                      {'data': 'Time'},
                      {'data': 'Moisture'},
                      {'data': 'Temperature'}]
            });
    } );
</script>


</div>
